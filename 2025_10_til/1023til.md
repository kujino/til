# 2025/10/23の日報
today: 5.5 hour, total: 363.5 hour
## 学習したこと
### AWSを使ってのデプロイ
* 昨日立ち上げたEC2インスタンスとデータベースを使いアプリをデプロイ
* SSH接続したWSLで操作
* yarnパッケージやnode.js、gem等のインストール
  * rubyインストール時にファイル容量が足りずエラー
  * /tempファイルをクリーンアップして再実行するもエラー
  * /tempファイルではだめなので違うファイルを指定
  * 結果無事インストール成功
```ruby
#rubyインストール時に容量が足りずインストールできない事態

[ec2-user]$ df -h

tmpfs             204M  186M   18M  92% /tmp
```

```ruby
#ファイルのクリーンアップ

[ec2-user]$ sudo find /tmp -type f -atime +7 -delete
[ec2-user]$ sudo rm -rf /tmp/ruby-build.*
[ec2-user]$ df -h /tmp
Filesystem      Size  Used Avail Use% Mounted on
tmpfs           204M     0  204M   0% /tmp
```

```ruby
# rbenv install -v 3.1.4でで再度実行してみるの容量制限をくらう

curl: (23) Failure writing output to destination, passed 16366 returned 1472
external command failed with status 23
error: failed to download ruby-3.1.4.tar.gz

...

BUILD FAILED (Amazon Linux 2023 on x86_64 using ruby-build 20251008)
```

```ruby
#別の場所を使ってインストールを試みる

[ec2-user]$ export TMPDIR=$HOME/tmp
[ec2-user]$ mkdir -p $HOME/tmp
[ec2-user]$ rbenv install -v 3.1.4
```

```ruby
#成功

==> Installed ruby-3.1.4 to /home/ec2-user/.rbenv/versions/3.1.4

NOTE: to activate this Ruby version as the new default, run: rbenv global 3.1.4
```

* その後pumaを起動
* Nginxのインストール、起動
* アプリを実行、無事反映される


