# 2025/10/07の日報
## 学習したこと
### YouTubeの埋め込み機能の実装
YouTubeの共有リンクをフォームに入力すると動画の埋め込みが生成される
`embed`モデルに取得したURLを埋め込みタグように生成されるメソッドを作成
```ruby
#YouTube埋め込み用メソッド

def embed_youtube_url
    return unless youtube? #enumで設定した値かどうか

    url_parts = identifier.split('/') #入力されたurlをスラッシュ区切り配列化
    url_parts[2] = "www.youtube.com" #3番目の要素の文字列を置換
    url_parts.insert(3, "embed") #3番目の要素の後に"embed"を追加
    url_parts.join('/') #配列の区切りをスラッシュで結合、埋め込み用のURLが生成される
  end
```

```ruby
#ビューで埋め込みコードの生成

ruby:
  embed = local_assigns[:embed]
  width = local_assigns[:width] || 853
  height = local_assigns[:height] || 480

.embed-youtube
  = content_tag 'iframe', nil, width: width, height: height, src: "#{embed.embed_youtube_url}", \
    frameborder: 0, gesture: 'media', allow: 'encrypted-media', allowfullscreen: true

```