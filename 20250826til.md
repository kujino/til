# 2025/08/26の日報

## 今日や行ったこと
* 掲示板にブックマーク機能を実装

マイグレーションファイルを生成後適応コマンド実行をし忘れていて焦って`db:migrate`コマンドを実行するも、「テーブルは既に存在しています」とのエラー。

マイグレーションファイルのステータス確認をしたところ未適用(DOWN)になっており、マイグレーションの記録を正しい状態に合わせる必要があると知る。

`ocker compose exec web rails runner "ActiveRecord::SchemaMigration.create!(version: 'migration id')"`

上記のコマンド実行したところ、適切に処理されるようになった。

## 学習メモ
* 多対多の関係の場合は中間テーブルをはさむ
使われない空白カラムが生まれてしまうため良くないDB設計となる(Multi Column Attribute(マルチカラムアトリビュート))
* バリデーションのscopeを使ったユニーク制約
hogeはhogeのスコープ内で一意でなければならない
* << : 追加処理
* (変数)present? : 変数の存在有無によって次の処理を変更したい場合に使う
* 開発環境、テスト環境、本番環境の違い(要学習)
* `RAILS_ENV=test` : テスト環境を明示的に指定
テストコードを通したところ、マイグレーションファイルの未適用が指摘された。DBやマイグレーションファイルのエラーについては環境ごとに適切に処理を行わなければならない。

## 理解が浅いと感じたところ
* collectionとmemberオプション(idがつくつかないはわかったけど)

処理フローを理解し、それぞれの関連性を考えてエラー解決が出来るようになりたい




